// Code to make E/p vs E  plots// Sam Grant // March 2019// samuel.grant.18@ucl.ac.uk#include <iostream>#include "TCanvas.h"#include "TDirectory.h"#include "TFile.h"#include "TH1D.h"#include "TAxis.h"using namespace std;int main() {  // Take input for gain corrected or uncorrected  bool save = true;  string whichFile = "fits_xtal_energy.root";  string output_fname = "fits_xtal_energy_normalised.root";  // string whichFile = "../uncorrected2/xtal_energy_normalised.root";  //string output_fname = "fits_xtal_energy_normalised.root";  TFile *input = TFile::Open(whichFile.c_str());  TFile *output = new TFile(output_fname.c_str(), "recreate");  for (int l = 13 ; l < 20 ; l = l + 6) {    for (int k = 0; k < 2 ; k++) {           string name = "St"+to_string(l)+"_fit_E_vs_xtal_"+to_string(k);      TH1D *h = (TH1D*)input->Get(name.c_str());      cout << name << endl;      double scale = h->GetBinContent(31);           h->Scale(1./scale);            /*  TCanvas *c1 = new TCanvas("c2", "c2", 2000, 1000);      h->SetStats(0);      h->GetYaxis()->SetRangeUser(0,1.1);      h->GetYaxis()->SetTitle("Energy Normalised to Crystal 30");      h->Draw();      if (save) {	c2->SaveAs((name+"_norm.png").c_str());      }      // Save to ROOT file      h->SetDirectory(output);      delete c1;*/                for (int i = 0 ; i < 54 ; i++) { 	if (h->GetBinContent(i+1) < 0.5){	  //	cout << i << endl;	  //	h->SetBinContent(i+1,0);	  //	h->SetBinError(i+1,0);	}      }       TCanvas *c2 = new TCanvas("c2", "c2", 2000, 1000);      h->SetStats(0);      h->GetYaxis()->SetRangeUser(0,1.1);      h->GetYaxis()->SetTitle("Energy Normalised to Crystal 30");      h->Draw();      if (save) {	c2->SaveAs((name+"_norm.png").c_str());      }      // Save to ROOT file      h->SetDirectory(output);      delete c2;      // if (cut) continue;      	  // return;            // if (save) {	    }  }  output->Write();  output->Close();  input->Close();  cout << "\nCreated: " << output_fname << endl;  return 0;}