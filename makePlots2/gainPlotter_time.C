// Code to make E/p vs E, E/p vs p, and E/p vs t plots// Using either gain corrected, or uncorrected// It also performs gauss fits in Y to slices in X// Sam Grant // March 2019// samuel.grant.18@ucl.ac.uk#include <iostream>#include "fitSlicesGauss.h"#include "cmap.h"#include "TFile.h"#include "TCanvas.h"#include "TH1D.h"#include "TH2D.h"#include "TStyle.h"#include "TAxis.h"#include "TProfile.h"#include "TF1.h"#include "TDirectory.h"#include "TObject.h"#include "TGraph.h"#include "TLegend.h"#include "TPaveStats.h"using namespace std;int main() {  // Take input for gain corrected or uncorrected  bool save = true;    string whichFile = "../uncorrected2/time_normalised_frac2.root";  string output_fname = "fits_time_normalised_3.root";    TFile *input = TFile::Open(whichFile.c_str());  TFile *output = new TFile(output_fname.c_str(), "RECREATE");  cout << "Reading: " << whichFile << endl;  //Station loop  for (int m = 13 ; m < 20 ; m = m + 6 ) {     string stn = "St"+to_string(m)+"_";    string tstn = "St "+to_string(m)+" | ";    cout<<"stn_"<<m<<endl;        // Breaker board loop    for (int j = 1 ; j < 3 ; j++ ) {      string name;      // double yMin, yMax;      if (j == 1 ) { 	name = ", Short Lifetime";      }       else if ( j == 2 ) {     	name = ", Long Lifetime";	}      // Start energy fraction cut      for (int l = 0 ; l < 4 ; l++ ) {	string ffoo[2] = {"Ep_vs_t_early","xy_calo"};	string tfoo[2] = {"E/p vs t","Calo Decay Vertices XY"};	string afoo[2] = {";In Fill Time [#mus];E/p",";Track Position at Calo Face X [mm];Track Position at Calo Face Y [mm]"};		string cut;	// For titles	if (l == 0) {	  cut = "";	}	else if (l == 1 ) { 	  cut = ", > 60% Fractional Energy";	} 	else if (l == 2 ) { 	  cut = ", > 75% Fractional Energy";	}	else if (l == 3 ) { 	  cut = ", > 99% Fractional Energy";	}       	// Put strings together for iterting hist/file/title names	string h[2],title[2],cmap_fname[2],fit_fname[2],g_fname[2];	for (int i = 0; i < 2; i++) {	  h[i]= stn+ffoo[i]+"_"+to_string(l)+"_"+to_string(j);	  cmap_fname[i] = stn+"cmap_"+ffoo[i]+"_"+to_string(l)+"_"+to_string(j);//+"_"+to_string(j);	  fit_fname[i] = stn+"fit_"+ffoo[i]+"_"+to_string(l)+"_"+to_string(j);//+"_"+to_string(j);	  g_fname[i] = stn+"gauss_"+ffoo[i]+"_"+to_string(l)+"_"+to_string(j);//+"_"+to_string(j)+"_";	  title[i] = tstn+tfoo[i]+name+cut+afoo[i];	}	TH2D *Ep_vs_t_early = (TH2D*)input->Get(h[0].c_str());	TH2D *xy_calo = (TH2D*)input->Get(h[1].c_str());	if (Ep_vs_t_early == 0) continue;	Ep_vs_t_early->GetXaxis()->SetLimits(0,4.2*50);	//	cmap(Ep_vs_t_early, title[0], cmap_fname[0], output, save);	cmap(xy_calo, title[1], cmap_fname[1], output, save);	//	fitSlicesGauss(Ep_vs_t_early, title[0], fit_fname[0], g_fname[0], output, save);      }    }  }      output->Write();    output->Close();    cout << "\nCreated: " << output_fname << endl;    return 0;  }