// Code to make E/p vs E  plots// Sam Grant // March 2019// samuel.grant.18@ucl.ac.uk#include <iostream>#include "TFile.h"#include "TH1D.h"#include "TCanvas.h"#include "TDirectory.h"using namespace std;int main() {  // Take input for gain corrected or uncorrected  bool save = false;  string in;  cout << "Save? Yes (y) or no (n)" << endl;  cin >> in;  if(in == "y") save = true;  else if(in == "n") save = false;  else cout<<"Error"<<endl;    string whichFile = "fits_xtal_energy.root";  string output_fname = "fits_xtal_energy_normalised2.root";  TFile *input = TFile::Open(whichFile.c_str());  TFile *output = new TFile(output_fname.c_str(), "recreate");  cout << "Reading: " << whichFile << endl;  //Station loop  for (int m = 13 ; m < 20 ; m = m + 6 ) {     string stn = "St"+to_string(m)+"_";    string tstn = "St "+to_string(m)+" | ";    // Start fiducial region loop      for (int l = 0 ; l < 2 ; l++ ) {	string ffoo = "fit_E_vs_xtal";//,"xy_calo"};	string tfoo = "E/p vs Crystal Number";//,"XY Calo"};	string afoo = ";Crystal Number;Normalised Energy";//,";Calo Decay Position X [mm];Calo Decay Position Y [mm]"};	string fid;	// For titles	if (l == 0) {	  fid = "";	}	else if (l == 1 ) { 	  fid = ", Fiducial";	}           	// Put strings together for iterting hist/file/title names	string h = stn+ffoo+"_"+to_string(l);//+"_"+to_string(j);	string cmap_fname = stn+"cmap_"+ffoo+"_"+to_string(l);//+"_"+to_string(j);	string g_fname = stn+"gauss_"+ffoo+"_"+to_string(l);//+"_"+to_string(j)+"_";	string title = tstn+tfoo+fid+afoo;  	TH1D *E_vs_xtal = (TH1D*)input->Get(h.c_str());		// Most energetic xtal is number 30	double max = E_vs_xtal->GetBinContent(31);	        E_vs_xtal->Scale(1./max);	//	E_vs_xtal->	E_vs_xtal->GetYaxis()->SetLimits(0.6,1);		TCanvas *c1 = new TCanvas("c1", "c1", 2000, 1000);	E_vs_xtal->SetStats(0);	E_vs_xtal->SetMarkerColor(kBlack);	E_vs_xtal->SetLineColor(kBlack);	E_vs_xtal->SetTitle(title.c_str());	//	E_vs_xtal->GetYaxis()->SetRangeUser(0.6,1.1);	E_vs_xtal->Draw();	c1->SetGrid();	if (save) {	  c1->SaveAs((h+".png").c_str());	}	// Save to ROOT file	E_vs_xtal->SetDirectory(output);	//delete E_vs_xtal;	delete c1;		      }  }  output->Write();  output->Close();  input->Close();    delete input;  delete output;    cout << "\nCreated: " << output_fname << endl;  return 0;}